<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout.html}"
      lang="en">

<div layout:fragment="content">
  <div class="container mt-5">
    <div class="row">
      <div class="col">
        <img th:src="|/concert/img/${concert.posterFileName}|" class="rounded">
      </div>
      <div class="col-7">
        <table class="table table-hover">
          <tr>
            <th class="table-success">제목</th>
            <td>[[${concert.title}]]</td>
          </tr>
          <tr>
            <th class="table-success">공연 시작 날짜</th>
            <td>[[${concert.startDate}]]</td>
          </tr>
          <tr>
            <th class="table-success">공연 종료 날짜</th>
            <td>[[${concert.endDate}]]</td>
          </tr>
          <tr>
            <th class="table-success">공연 시간</th>
            <td>[[${concert.performanceTime}]]</td>
          </tr>
          <tr>
            <th class="table-success">공연 장소</th>
            <td>[[${concert.location}]]</td>
          </tr>
          <tr>
            <th class="table-success">이용 가능 연령</th>
            <td>[[${concert.ageRate}]]</td>
          </tr>
        </table>

        <!-- 추첨 안내 문구 -->
        <p style="font-size: 14px; color: #333;">
          ※ 공연 시작 <strong style="color: red;">3일전</strong> 추첨을 통해 발표됩니다.<br>
          <span style="color: #666; font-size: 13px;">
    "2025-05-05 공연 ⇒ 2025-05-02 추첨발표일"
  </span>
        </p>

        <!-- 관람일 선택 + 예약 버튼 -->
        <form th:action="@{/reservation/start}" method="post" class="mt-4">
          <div class="card shadow-sm p-4" style="max-width: 320px; border-radius: 16px; border: 1px solid #eee;">
            <label for="selectedDate" class="form-label mb-2" style="font-weight: bold; font-size: 15px;">
              🎟️ 관람일 선택
            </label>
            <input
                    type="date"
                    name="selectedDate"
                    id="selectedDate"
                    class="form-control mb-3"
                    th:attr="min=${#dates.format(concert.startDate, 'yyyy-MM-dd')}, max=${#dates.format(concert.endDate, 'yyyy-MM-dd')}"
                    required
                    style="border-radius: 8px; padding: 10px;"
            >

            <input type="hidden" name="concertNum" th:value="${concert.concertNum}">

            <button type="submit"
                    class="btn w-100"
                    style="background-color: #006242; color: white; font-weight: bold; border-radius: 8px; padding: 10px;">
              예약하기
            </button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>